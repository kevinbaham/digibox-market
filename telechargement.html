<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Fichier √† t√©l√©charger</title>
</head>
<body>
  <h2>üéâ Merci pour votre achat !</h2>

  <!-- SECTION PRODUITS -->
  <section id="products" class="products" data-aos="fade-up">
    <div class="container">
      <h2>Nos Produits</h2>
      <div class="product-list" style="display: flex; gap: 32px; flex-wrap: wrap; justify-content: center;">
        <!-- Produit 1 : CV Canva ‚Äì Bleu Pro -->
        <div class="product-card" style="border:1px solid #eee; border-radius:10px; padding:20px; width:300px; text-align:center;">
          <img src="img/cv-canva-1.png" alt="CV Canva ‚Äì Bleu Pro" style="width:100%;max-width:220px;">
          <h3>CV Canva ‚Äì Bleu Pro</h3>
          <p>Mod√®le 100% modifiable sur Canva</p>
          <p><strong>Prix :</strong> 2000 FCFA</p>
          <a href="https://www.canva.com/design/DAGstd4aCS4/D4WjsUaSJ0Ff14UgpnahcQ/edit?utm_content=DAGstd4aCS4&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton" class="btn" target="_blank" style="margin-bottom:8px;display:inline-block;">‚úèÔ∏è Modifier sur Canva</a><br>
          <a href="https://www.canva.com/design/DAGstd4aCS4/sBGTTehP8yW8AuVNl8AuRw/view?utm_content=DAGstd4aCS4&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=heececb0f22" target="_blank" style="font-size:0.95em;">üëÅÔ∏è Voir un aper√ßu</a>
        </div>
        <!-- Ajoute d'autres produits ici -->
        <div class="product-card" style="border:1px solid #eee; border-radius:10px; padding:20px; width:300px; text-align:center;">
          <img src="img/cv-pro.png" alt="Mod√®le CV Pro" style="width:100%;max-width:220px;">
          <h3>Mod√®le CV Pro</h3>
          <p>Mod√®le de CV moderne, facile √† √©diter</p>
          <p><strong>Prix :</strong> 2000 FCFA</p>
          <a href="https://yourdomain.com/fichiers/cv-pro.zip" class="btn" target="_blank">üì• T√©l√©charger</a>
        </div>
        <!-- Exemple d'un autre produit -->
        <div class="product-card" style="border:1px solid #eee; border-radius:10px; padding:20px; width:300px; text-align:center;">
          <img src="img/formation-canva.png" alt="Pack Formation Canva" style="width:100%;max-width:220px;">
          <h3>Pack Formation Canva</h3>
          <p>Apprenez √† ma√Ætriser Canva facilement</p>
          <p><strong>Prix :</strong> 5000 FCFA</p>
          <a href="https://yourdomain.com/fichiers/canva-formation.zip" class="btn" target="_blank">üì• T√©l√©charger</a>
        </div>
      </div>
    </div>
  </section>

  <script>
    function buyProduct(productName, price) {
      const transaction_id = "TX" + Date.now();
      const customer_email = "client@example.com";

      CinetPay.setConfig({
        apikey: "VOTRE_API_KEY",
        site_id: "VOTRE_SITE_ID",
        notify_url: "https://votre-site.com/notify",
        mode: "PRODUCTION"
      });

      CinetPay.getCheckout({
        transaction_id: transaction_id,
        amount: price,
        currency: "XOF",
        channels: "ALL",
        description: "Achat: " + productName,
        customer_email: customer_email,
        metadata: {
          product: productName
        }
      });

      CinetPay.waitResponse(function(data) {
        if (data.status === "ACCEPTED") {
          const token = btoa(productName + ":" + transaction_id);
          window.location.href = "telechargement.html?token=" + encodeURIComponent(token);
        } else {
          alert("Paiement √©chou√© ou annul√© ‚ùå");
        }
      });

      CinetPay.onError(function(err) {
        console.error(err);
        alert("Erreur de paiement !");
      });
    }

    const params = new URLSearchParams(window.location.search);
    const token = params.get("token");

    if (!token) {
      document.write("<p>‚ùå Acc√®s refus√©. Token manquant.</p>");
    } else {
      const decoded = atob(token); // d√©code "Produit:Transaction"
      const [produit, transaction] = decoded.split(":");

      let lien = "#";

      if (produit === "Mod√®le CV Pro") {
        lien = "https://yourdomain.com/fichiers/cv-pro.zip";
      } else if (produit === "Pack Formation Canva") {
        lien = "https://yourdomain.com/fichiers/canva-formation.zip";
      } else if (produit === "CV Canva ‚Äì Bleu Pro") {
        lien = "https://www.canva.com/design/DAGstd4aCS4/D4WjsUaSJ0Ff14UgpnahcQ/edit?utm_content=DAGstd4aCS4&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton";
        var lienLecture = "https://www.canva.com/design/DAGstd4aCS4/sBGTTehP8yW8AuVNl8AuRw/view?utm_content=DAGstd4aCS4&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=heececb0f22";
      }

      if (produit === "CV Canva ‚Äì Bleu Pro") {
        document.write(`
          <p>Vous avez achet√© : <strong>${produit}</strong></p>
          <a href="${lien}" class="btn" target="_blank">‚úèÔ∏è Modifier sur Canva</a><br>
          <a href="${lienLecture}" target="_blank" style="display:inline-block;margin-top:10px;">üëÅÔ∏è Voir un aper√ßu</a>
        `);
      } else {
        document.write(`
          <p>Vous avez achet√© : <strong>${produit}</strong></p>
          <a href="${lien}" class="btn">üì• T√©l√©charger ${produit}</a>
        `);
      }
    }
  </script>
</body>
</html>
